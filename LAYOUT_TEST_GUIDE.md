# å¸ƒå±€æµ‹è¯•æŒ‡å—

## æµ‹è¯•ç›®æ ‡

éªŒè¯è®°å¿†ç®¡ç†é¡µé¢å’ŒèŠå¤©é¡µé¢çš„å¸ƒå±€ä¿®å¤æ˜¯å¦æœ‰æ•ˆï¼Œç¡®ä¿åœ¨å„ç§è®¾å¤‡å’Œå±å¹•å°ºå¯¸ä¸‹éƒ½èƒ½æ­£å¸¸æ˜¾ç¤ºã€‚

## æµ‹è¯•ç¯å¢ƒ

### æ¡Œé¢ç«¯æµ‹è¯•
1. **Chrome DevTools**
   - æ‰“å¼€å¼€å‘è€…å·¥å…· (F12)
   - åˆ‡æ¢åˆ°è®¾å¤‡æ¨¡æ‹Ÿæ¨¡å¼
   - æµ‹è¯•ä¸åŒè®¾å¤‡å°ºå¯¸

2. **æµè§ˆå™¨çª—å£è°ƒæ•´**
   - å°†æµè§ˆå™¨çª—å£è°ƒæ•´åˆ°æœ€å°å®½åº¦
   - é€æ¸å¢åŠ å®½åº¦è§‚å¯Ÿå¸ƒå±€å˜åŒ–

### ç§»åŠ¨ç«¯æµ‹è¯•
1. **çœŸå®è®¾å¤‡æµ‹è¯•**
   - iPhone (å„ç§å°ºå¯¸)
   - Android è®¾å¤‡
   - å¹³æ¿è®¾å¤‡

2. **æ¨¡æ‹Ÿå™¨æµ‹è¯•**
   - Chrome DevTools è®¾å¤‡æ¨¡æ‹Ÿ
   - Firefox å“åº”å¼è®¾è®¡æ¨¡å¼

## æµ‹è¯•ç”¨ä¾‹

### 1. è®°å¿†ç®¡ç†é¡µé¢æµ‹è¯•

#### æµ‹è¯•æ­¥éª¤
```
1. åˆ›å»ºä¸€ä¸ªè§’è‰²
2. è¿›å…¥è§’è‰²è®°å¿†ç®¡ç†é¡µé¢ (/role/[id]/memory)
3. æ·»åŠ ä»¥ä¸‹æµ‹è¯•æ•°æ®ï¼š
   - çŸ­è®°å¿†ï¼šæ­£å¸¸é•¿åº¦çš„æ–‡æœ¬
   - é•¿è®°å¿†ï¼šè¶…è¿‡200å­—çš„é•¿æ–‡æœ¬
   - è¶…é•¿å•è¯ï¼šåŒ…å«å¾ˆé•¿è‹±æ–‡å•è¯çš„æ–‡æœ¬
   - ç‰¹æ®Šå­—ç¬¦ï¼šåŒ…å«emojiå’Œç‰¹æ®Šç¬¦å·çš„æ–‡æœ¬
```

#### éªŒè¯ç‚¹
- [ ] é¡µé¢æ ‡é¢˜ä¸è¶…å‡ºå®¹å™¨å®½åº¦
- [ ] è§’è‰²åç§°è¿‡é•¿æ—¶æ­£ç¡®æˆªæ–­
- [ ] æ·»åŠ è®°å¿†æŒ‰é’®åœ¨å°å±å¹•ä¸Šæ­£ç¡®æ¢è¡Œ
- [ ] è®°å¿†åˆ—è¡¨é¡¹ä¸è¶…å‡ºå®¹å™¨
- [ ] é•¿æ–‡æœ¬è®°å¿†æ­£ç¡®æ¢è¡Œ
- [ ] ç¼–è¾‘æ¨¡å¼ä¸‹æ–‡æœ¬åŸŸä¸è¶…å‡ºå®¹å™¨
- [ ] æ“ä½œæŒ‰é’®å§‹ç»ˆå¯è§ä¸”å¯ç‚¹å‡»

#### æµ‹è¯•æ•°æ®ç¤ºä¾‹
```
çŸ­è®°å¿†ï¼š
è¿™æ˜¯ä¸€æ®µæ­£å¸¸é•¿åº¦çš„è®°å¿†æ–‡æœ¬ï¼Œç”¨äºæµ‹è¯•åŸºæœ¬å¸ƒå±€ã€‚

é•¿è®°å¿†ï¼š
è¿™æ˜¯ä¸€æ®µå¾ˆé•¿å¾ˆé•¿çš„è®°å¿†æ–‡æœ¬ï¼Œç”¨äºæµ‹è¯•é•¿æ–‡æœ¬çš„æ¢è¡Œæ•ˆæœã€‚è¿™æ®µæ–‡æœ¬åŒ…å«äº†å¾ˆå¤šå†…å®¹ï¼Œéœ€è¦ç¡®ä¿åœ¨å„ç§å±å¹•å°ºå¯¸ä¸‹éƒ½èƒ½æ­£ç¡®æ˜¾ç¤ºï¼Œä¸ä¼šè¶…å‡ºå®¹å™¨çš„è¾¹ç•Œã€‚æˆ‘ä»¬éœ€è¦éªŒè¯æ–‡æœ¬æ˜¯å¦èƒ½å¤Ÿæ­£ç¡®æ¢è¡Œï¼Œä»¥åŠæ˜¯å¦ä¼šå‡ºç°æ°´å¹³æ»šåŠ¨æ¡ã€‚

è¶…é•¿å•è¯ï¼š
This is a test with supercalifragilisticexpialidocious and pneumonoultramicroscopicsilicovolcanoconiosiswhichisaverylongwordthatmightcauselayoutissues.

ç‰¹æ®Šå­—ç¬¦ï¼š
è¿™æ˜¯åŒ…å«emojiçš„è®°å¿† ğŸ‰ğŸŠâœ¨ è¿˜æœ‰ä¸€äº›ç‰¹æ®Šç¬¦å· â˜…â˜†â™ â™£â™¥â™¦ ä»¥åŠå„ç§æ ‡ç‚¹ç¬¦å·ï¼ï¼ï¼ï¼Ÿï¼Ÿï¼Ÿ
```

### 2. èŠå¤©é¡µé¢æµ‹è¯•

#### æµ‹è¯•æ­¥éª¤
```
1. è¿›å…¥èŠå¤©é¡µé¢ (/chat/[roleId])
2. å‘é€ä»¥ä¸‹æµ‹è¯•æ¶ˆæ¯ï¼š
   - çŸ­æ¶ˆæ¯ï¼šæ­£å¸¸é•¿åº¦
   - é•¿æ¶ˆæ¯ï¼šè¶…è¿‡100å­—
   - è¶…é•¿å•è¯æ¶ˆæ¯
   - å¤šè¡Œæ¶ˆæ¯ï¼ˆåŒ…å«æ¢è¡Œç¬¦ï¼‰
   - ç‰¹æ®Šå­—ç¬¦æ¶ˆæ¯
```

#### éªŒè¯ç‚¹
- [ ] è§’è‰²åç§°å’Œæè¿°ä¸è¶…å‡ºå¤´éƒ¨å®¹å™¨
- [ ] ç”¨æˆ·æ¶ˆæ¯æ°”æ³¡ä¸è¶…å‡ºå±å¹•å³ä¾§
- [ ] AIå›å¤æ¶ˆæ¯æ°”æ³¡ä¸è¶…å‡ºå±å¹•å·¦ä¾§
- [ ] é•¿æ¶ˆæ¯æ­£ç¡®æ¢è¡Œ
- [ ] æ¶ˆæ¯è¾“å…¥æ¡†ä¸è¢«å‹ç¼©
- [ ] é‡è¯•åŒºåŸŸå¸ƒå±€æ­£ç¡®
- [ ] æ»šåŠ¨åˆ°åº•éƒ¨åŠŸèƒ½æ­£å¸¸

#### æµ‹è¯•æ¶ˆæ¯ç¤ºä¾‹
```
çŸ­æ¶ˆæ¯ï¼š
ä½ å¥½ï¼

é•¿æ¶ˆæ¯ï¼š
è¿™æ˜¯ä¸€æ¡å¾ˆé•¿çš„æ¶ˆæ¯ï¼Œç”¨äºæµ‹è¯•æ¶ˆæ¯æ°”æ³¡çš„æ¢è¡Œæ•ˆæœã€‚æˆ‘ä»¬éœ€è¦ç¡®ä¿è¿™æ¡æ¶ˆæ¯èƒ½å¤Ÿåœ¨å„ç§å±å¹•å°ºå¯¸ä¸‹æ­£ç¡®æ˜¾ç¤ºï¼Œä¸ä¼šè¶…å‡ºå±å¹•è¾¹ç•Œï¼ŒåŒæ—¶ä¿æŒè‰¯å¥½çš„å¯è¯»æ€§ã€‚

è¶…é•¿å•è¯ï¼š
Supercalifragilisticexpialidocious pneumonoultramicroscopicsilicovolcanoconiosistest

å¤šè¡Œæ¶ˆæ¯ï¼š
è¿™æ˜¯ç¬¬ä¸€è¡Œ
è¿™æ˜¯ç¬¬äºŒè¡Œ
è¿™æ˜¯ç¬¬ä¸‰è¡Œ

ç‰¹æ®Šå­—ç¬¦ï¼š
ğŸ‰ğŸŠâœ¨ Hello World! â˜…â˜†â™ â™£â™¥â™¦
```

### 3. å“åº”å¼æµ‹è¯•

#### å±å¹•å°ºå¯¸æµ‹è¯•
```
1. 320px (iPhone SE)
2. 375px (iPhone 12 mini)
3. 414px (iPhone 12 Pro Max)
4. 768px (iPad)
5. 1024px (iPad Pro)
6. 1200px+ (æ¡Œé¢)
```

#### æ–¹å‘æµ‹è¯•
- [ ] ç«–å±æ¨¡å¼æ­£å¸¸æ˜¾ç¤º
- [ ] æ¨ªå±æ¨¡å¼æ­£å¸¸æ˜¾ç¤º
- [ ] æ–¹å‘åˆ‡æ¢æ—¶å¸ƒå±€ç¨³å®š

### 4. è¾¹ç•Œæƒ…å†µæµ‹è¯•

#### æç«¯æ•°æ®æµ‹è¯•
```
1. ç©ºå†…å®¹
2. å•ä¸ªå­—ç¬¦
3. 1000+å­—ç¬¦çš„è¶…é•¿æ–‡æœ¬
4. çº¯æ•°å­—/çº¯è‹±æ–‡/çº¯ä¸­æ–‡
5. æ··åˆè¯­è¨€å†…å®¹
```

#### ç½‘ç»œçŠ¶å†µæµ‹è¯•
- [ ] æ…¢ç½‘ç»œä¸‹åŠ è½½æ­£å¸¸
- [ ] ç¦»çº¿çŠ¶æ€ä¸‹å¸ƒå±€ç¨³å®š
- [ ] åŠ è½½å¤±è´¥æ—¶é”™è¯¯æç¤ºæ­£ç¡®æ˜¾ç¤º

## è‡ªåŠ¨åŒ–æµ‹è¯•

### Playwright æµ‹è¯•ç¤ºä¾‹
```javascript
// æµ‹è¯•è®°å¿†ç®¡ç†é¡µé¢å¸ƒå±€
test('memory page layout', async ({ page }) => {
  await page.goto('/role/test-role/memory');
  
  // æ£€æŸ¥å®¹å™¨ä¸è¶…å‡ºè§†å£
  const container = page.locator('.container-safe');
  const boundingBox = await container.boundingBox();
  const viewport = page.viewportSize();
  
  expect(boundingBox.width).toBeLessThanOrEqual(viewport.width);
});

// æµ‹è¯•æ¶ˆæ¯æ°”æ³¡å®½åº¦
test('chat message width', async ({ page }) => {
  await page.goto('/chat/test-role');
  
  // å‘é€é•¿æ¶ˆæ¯
  await page.fill('input[placeholder="è¾“å…¥æ¶ˆæ¯..."]', 'Very long message...');
  await page.click('button[type="submit"]');
  
  // æ£€æŸ¥æ¶ˆæ¯æ°”æ³¡å®½åº¦
  const messageBubble = page.locator('.message-bubble').last();
  const bubbleBox = await messageBubble.boundingBox();
  const viewport = page.viewportSize();
  
  expect(bubbleBox.width).toBeLessThanOrEqual(viewport.width * 0.75);
});
```

## é—®é¢˜æ’æŸ¥

### å¸¸è§é—®é¢˜

1. **æ°´å¹³æ»šåŠ¨æ¡å‡ºç°**
   - æ£€æŸ¥æ˜¯å¦ä½¿ç”¨äº† `w-screen`
   - ç¡®è®¤å®¹å™¨æœ‰ `overflow-hidden`
   - éªŒè¯å­å…ƒç´ æ²¡æœ‰å›ºå®šå®½åº¦

2. **æ–‡æœ¬è¢«æˆªæ–­**
   - æ£€æŸ¥çˆ¶å®¹å™¨æ˜¯å¦æœ‰ `min-w-0`
   - ç¡®è®¤ä½¿ç”¨äº†æ­£ç¡®çš„æ–‡æœ¬æ¢è¡Œç±»

3. **æŒ‰é’®è¢«å‹ç¼©**
   - ç¡®è®¤æŒ‰é’®æœ‰ `flex-shrink-0`
   - æ£€æŸ¥æŒ‰é’®ç»„æ˜¯å¦ä½¿ç”¨ `flex-wrap`

4. **å¸ƒå±€åœ¨æŸäº›è®¾å¤‡ä¸Šå¼‚å¸¸**
   - ä½¿ç”¨æµè§ˆå™¨å¼€å‘å·¥å…·æ¨¡æ‹Ÿè¯¥è®¾å¤‡
   - æ£€æŸ¥CSSæ˜¯å¦æœ‰è®¾å¤‡ç‰¹å®šçš„é—®é¢˜

### è°ƒè¯•å·¥å…·

1. **Chrome DevTools**
   - Elements é¢æ¿æŸ¥çœ‹å…ƒç´ å°ºå¯¸
   - Computed é¢æ¿æŸ¥çœ‹æœ€ç»ˆæ ·å¼
   - Device æ¨¡æ‹Ÿå™¨æµ‹è¯•å“åº”å¼

2. **Firefox DevTools**
   - Flexbox æ£€æŸ¥å™¨
   - Grid æ£€æŸ¥å™¨
   - å“åº”å¼è®¾è®¡æ¨¡å¼

## éªŒæ”¶æ ‡å‡†

### å¿…é¡»æ»¡è¶³
- [ ] æ— æ°´å¹³æ»šåŠ¨æ¡
- [ ] æ‰€æœ‰æ–‡æœ¬å¯è¯»
- [ ] æ‰€æœ‰æŒ‰é’®å¯ç‚¹å‡»
- [ ] å¸ƒå±€åœ¨æ‰€æœ‰æµ‹è¯•è®¾å¤‡ä¸Šæ­£å¸¸

### æ€§èƒ½è¦æ±‚
- [ ] é¡µé¢åŠ è½½æ—¶é—´ < 3ç§’
- [ ] å¸ƒå±€é‡æ’æ¬¡æ•°æœ€å°åŒ–
- [ ] å†…å­˜ä½¿ç”¨åˆç†

### ç”¨æˆ·ä½“éªŒ
- [ ] è§†è§‰å±‚æ¬¡æ¸…æ™°
- [ ] äº¤äº’åé¦ˆåŠæ—¶
- [ ] é”™è¯¯çŠ¶æ€å‹å¥½
